(window.__LOADABLE_LOADED_CHUNKS__=window.__LOADABLE_LOADED_CHUNKS__||[]).push([[157],{"+6pD":function(e,t,s){"use strict";var n=s("lSNA"),a=s.n(n),r=s("q1tI"),i=s.n(r),o=s("/MKj"),l=s("d2gv"),c=s.n(l),u=s("17x9"),p=s.n(u),m=s("IP2g"),d=s("LRgy"),h=s.n(d),g=s("vDqi"),b=s.n(g),f=s("Elhd"),R=s.n(f),_=s("jiZR"),y=s("IrSZ"),k=s("0pXI");var E=e=>(t,s)=>{if(!e)return Promise.resolve(!1);const{properties:n}=e,a={};"Positive"===n["Document Rated"]&&(a["Last Positive Rated Document ID"]=n["Document ID"]);const{testRatingsTimeRange:r,testSortingFormulas:i}=s().ab,o=Object(y.a)(s());return"15 Months"===r&&(n["Document Rating Past 15 Months"]=o.rating_positive-o.rating_negative),"18 Months"===r&&(n["Document Rating Past 18 Months"]=o.rating_positive-o.rating_negative),n["Test Sorting Formulas"]=i,["Wilson","Laplace"].includes(i)&&(n["Document Positive Experience Probability"]=o.positiveExperienceProbability),t(Object(k.a)("Document Rated",n,a))},v=s("PMJz"),w=s("N4+1");const S=({rating_positive:e,rating_negative:t,user_rating:s,rating:n})=>({type:_.SET_RATING,payload:{rating_positive:e,rating_negative:t,user_rating:s,rating:n}});var x=(e,t,s,n,a,r)=>(i,o)=>{const l=s+((e,t)=>1===e&&0===t||1===e&&-1===t?-1:1!==e&&1===t?1:0)(a,t),u=n+((e,t)=>-1===e&&0===t||-1===e&&1===t?-1:-1!==e&&-1===t?1:0)(a,t),p=S({rating_positive:Math.max(0,l),rating_negative:Math.max(0,u),user_rating:t,rating:t});i(p);const{testMyLikedDocuments:m}=o().ab,{isLoggedIn:d}=o().user;return b.a.post(R.a.route("api.documents.ratings.store",{documentId:e}),{documentId:e,rating:t}).then(e=>{const s=e.data.tracking||[];return s.properties["Rating Origin"]=r,i(E(s)),!d||"With, New Design"!==m&&"With, Old Design"!==m||1!==t||i(Object(w.a)(c.a.get("document_added_to_studylist",{studylistName:`<strong>${c.a.get("liked_documents_studylist")}</strong>`}))),e}).catch(e=>{throw i(S({rating_positive:s,rating_negative:n,user_rating:0,rating:0})),i(Object(v.a)(c.a.get("messages.need_to_sign_in_to_rate"))),e})},C=s("2iE4");const T={documentId:p.a.number.isRequired,positiveRatings:p.a.number.isRequired,negativeRatings:p.a.number.isRequired,readOnly:p.a.bool.isRequired,onRate:p.a.func.isRequired,showRatingText:p.a.bool,userRating:p.a.number,dispatch:p.a.func.isRequired,ratingOrigin:p.a.string};class O extends r.PureComponent{constructor(...e){super(...e),a()(this,"state",{disabled:this.props.readOnly}),a()(this,"handleRateClick",e=>{let t=e;this.props.readOnly||this.state.disabled||(e===this.props.userRating&&(t=0),this.setState({disabled:!0},()=>{this.props.onRate(t),this.props.dispatch(x(this.props.documentId,t,this.props.positiveRatings,this.props.negativeRatings,this.props.userRating,this.props.ratingOrigin)).finally(()=>this.setState({disabled:!1}))}))})}render(){const e=this.props.userRating>0?"fas":"far",t=this.props.userRating<0?"fas":"far";return i.a.createElement("div",{className:h.a.wrapper},this.props.showRatingText&&i.a.createElement("span",{className:"flex-no-shrink"},c.a.get("helpful")),i.a.createElement(C.c,{className:h.a.button,color:this.props.userRating>0?"outline-success":"light",type:"button",size:"small-wide",onClick:()=>this.handleRateClick(1),disabled:this.props.readOnly||this.state.disabled},i.a.createElement(m.a,{icon:[e,"thumbs-up"],className:h.a.thumbsUp,size:"sm"}),i.a.createElement("span",{},this.props.positiveRatings)),i.a.createElement(C.c,{className:h.a.button,color:this.props.userRating<0?"outline-danger":"light",type:"button",size:"small-wide",onClick:()=>this.handleRateClick(-1),disabled:this.props.readOnly||this.state.disabled},i.a.createElement(m.a,{icon:[t,"thumbs-down"],className:h.a.thumbsDown,size:"sm"}),i.a.createElement("span",{},this.props.negativeRatings)))}}O.propTypes=T,O.defaultProps={showRatingText:!0,userRating:null,ratingOrigin:""};t.a=Object(o.connect)()(O)},"4V4G":function(e,t,s){e.exports={"pop-up":"pop-up--21ihD",popUp:"pop-up--21ihD","close-button":"close-button--3ECcJ",closeButton:"close-button--3ECcJ",text:"text--3Ojer","rate-buttons-wrapper":"rate-buttons-wrapper--3sIzg",rateButtonsWrapper:"rate-buttons-wrapper--3sIzg"}},DHZf:function(e,t,s){"use strict";s.d(t,"a",(function(){return n})),s.d(t,"b",(function(){return a})),s.d(t,"c",(function(){return r}));const n=1e4,a=4e4,r=15e3},DlQD:function(e,t,s){!function(t){"use strict";var s={newline:/^\n+/,code:/^( {4}[^\n]+\n*)+/,fences:/^ {0,3}(`{3,}|~{3,})([^`~\n]*)\n(?:|([\s\S]*?)\n)(?: {0,3}\1[~`]* *(?:\n+|$)|$)/,hr:/^ {0,3}((?:- *){3,}|(?:_ *){3,}|(?:\* *){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6}) +([^\n]*?)(?: +#+)? *(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3})(bull) [\s\S]+?(?:hr|def|\n{2,}(?! )(?!\1bull )\n*|\s*$)/,html:"^ {0,3}(?:<(script|pre|style)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?\\?>\\n*|<![A-Z][\\s\\S]*?>\\n*|<!\\[CDATA\\[[\\s\\S]*?\\]\\]>\\n*|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:\\n{2,}|$)|<(?!script|pre|style)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:\\n{2,}|$)|</(?!script|pre|style)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:\\n{2,}|$))",def:/^ {0,3}\[(label)\]: *\n? *<?([^\s>]+)>?(?:(?: +\n? *| *\n *)(title))? *(?:\n+|$)/,nptable:b,table:b,lheading:/^([^\n]+)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html)[^\n]+)*)/,text:/^[^\n]+/};function n(e){this.tokens=[],this.tokens.links=Object.create(null),this.options=e||E.defaults,this.rules=s.normal,this.options.pedantic?this.rules=s.pedantic:this.options.gfm&&(this.rules=s.gfm)}s._label=/(?!\s*\])(?:\\[\[\]]|[^\[\]])+/,s._title=/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/,s.def=m(s.def).replace("label",s._label).replace("title",s._title).getRegex(),s.bullet=/(?:[*+-]|\d{1,9}\.)/,s.item=/^( *)(bull) ?[^\n]*(?:\n(?!\1bull ?)[^\n]*)*/,s.item=m(s.item,"gm").replace(/bull/g,s.bullet).getRegex(),s.list=m(s.list).replace(/bull/g,s.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+s.def.source+")").getRegex(),s._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",s._comment=/<!--(?!-?>)[\s\S]*?-->/,s.html=m(s.html,"i").replace("comment",s._comment).replace("tag",s._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),s.paragraph=m(s._paragraph).replace("hr",s.hr).replace("heading"," {0,3}#{1,6} +").replace("|lheading","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}|~{3,})[^`\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|!--)").replace("tag",s._tag).getRegex(),s.blockquote=m(s.blockquote).replace("paragraph",s.paragraph).getRegex(),s.normal=f({},s),s.gfm=f({},s.normal,{nptable:/^ *([^|\n ].*\|.*)\n *([-:]+ *\|[-| :]*)(?:\n((?:.*[^>\n ].*(?:\n|$))*)\n*|$)/,table:/^ *\|(.+)\n *\|?( *[-:]+[-| :]*)(?:\n((?: *[^>\n ].*(?:\n|$))*)\n*|$)/}),s.pedantic=f({},s.normal,{html:m("^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:\"[^\"]*\"|'[^']*'|\\s[^'\"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))").replace("comment",s._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^ *(#{1,6}) *([^\n]+?) *(?:#+ *)?(?:\n+|$)/,fences:b,paragraph:m(s.normal._paragraph).replace("hr",s.hr).replace("heading"," *#{1,6} *[^\n]").replace("lheading",s.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()}),n.rules=s,n.lex=function(e,t){var s=new n(t);return s.lex(e)},n.prototype.lex=function(e){return e=e.replace(/\r\n|\r/g,"\n").replace(/\t/g,"    ").replace(/\u00a0/g," ").replace(/\u2424/g,"\n"),this.token(e,!0)},n.prototype.token=function(e,t){var n,a,r,i,o,l,c,p,m,d,h,g,b,f,y,k;for(e=e.replace(/^ +$/gm,"");e;)if((r=this.rules.newline.exec(e))&&(e=e.substring(r[0].length),r[0].length>1&&this.tokens.push({type:"space"})),r=this.rules.code.exec(e)){var E=this.tokens[this.tokens.length-1];e=e.substring(r[0].length),E&&"paragraph"===E.type?E.text+="\n"+r[0].trimRight():(r=r[0].replace(/^ {4}/gm,""),this.tokens.push({type:"code",codeBlockStyle:"indented",text:this.options.pedantic?r:_(r,"\n")}))}else if(r=this.rules.fences.exec(e))e=e.substring(r[0].length),this.tokens.push({type:"code",lang:r[2]?r[2].trim():r[2],text:r[3]||""});else if(r=this.rules.heading.exec(e))e=e.substring(r[0].length),this.tokens.push({type:"heading",depth:r[1].length,text:r[2]});else if((r=this.rules.nptable.exec(e))&&(l={type:"table",header:R(r[1].replace(/^ *| *\| *$/g,"")),align:r[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:r[3]?r[3].replace(/\n$/,"").split("\n"):[]},l.header.length===l.align.length)){for(e=e.substring(r[0].length),h=0;h<l.align.length;h++)/^ *-+: *$/.test(l.align[h])?l.align[h]="right":/^ *:-+: *$/.test(l.align[h])?l.align[h]="center":/^ *:-+ *$/.test(l.align[h])?l.align[h]="left":l.align[h]=null;for(h=0;h<l.cells.length;h++)l.cells[h]=R(l.cells[h],l.header.length);this.tokens.push(l)}else if(r=this.rules.hr.exec(e))e=e.substring(r[0].length),this.tokens.push({type:"hr"});else if(r=this.rules.blockquote.exec(e))e=e.substring(r[0].length),this.tokens.push({type:"blockquote_start"}),r=r[0].replace(/^ *> ?/gm,""),this.token(r,t),this.tokens.push({type:"blockquote_end"});else if(r=this.rules.list.exec(e)){for(e=e.substring(r[0].length),i=r[2],f=i.length>1,c={type:"list_start",ordered:f,start:f?+i:"",loose:!1},this.tokens.push(c),r=r[0].match(this.rules.item),p=[],n=!1,b=r.length,h=0;h<b;h++)l=r[h],d=l.length,l=l.replace(/^ *([*+-]|\d+\.) */,""),~l.indexOf("\n ")&&(d-=l.length,l=this.options.pedantic?l.replace(/^ {1,4}/gm,""):l.replace(new RegExp("^ {1,"+d+"}","gm"),"")),h!==b-1&&(o=s.bullet.exec(r[h+1])[0],(i.length>1?1===o.length:o.length>1||this.options.smartLists&&o!==i)&&(e=r.slice(h+1).join("\n")+e,h=b-1)),a=n||/\n\n(?!\s*$)/.test(l),h!==b-1&&(n="\n"===l.charAt(l.length-1),a||(a=n)),a&&(c.loose=!0),y=/^\[[ xX]\] /.test(l),k=void 0,y&&(k=" "!==l[1],l=l.replace(/^\[[ xX]\] +/,"")),m={type:"list_item_start",task:y,checked:k,loose:a},p.push(m),this.tokens.push(m),this.token(l,!1),this.tokens.push({type:"list_item_end"});if(c.loose)for(b=p.length,h=0;h<b;h++)p[h].loose=!0;this.tokens.push({type:"list_end"})}else if(r=this.rules.html.exec(e))e=e.substring(r[0].length),this.tokens.push({type:this.options.sanitize?"paragraph":"html",pre:!this.options.sanitizer&&("pre"===r[1]||"script"===r[1]||"style"===r[1]),text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(r[0]):u(r[0]):r[0]});else if(t&&(r=this.rules.def.exec(e)))e=e.substring(r[0].length),r[3]&&(r[3]=r[3].substring(1,r[3].length-1)),g=r[1].toLowerCase().replace(/\s+/g," "),this.tokens.links[g]||(this.tokens.links[g]={href:r[2],title:r[3]});else if((r=this.rules.table.exec(e))&&(l={type:"table",header:R(r[1].replace(/^ *| *\| *$/g,"")),align:r[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:r[3]?r[3].replace(/\n$/,"").split("\n"):[]},l.header.length===l.align.length)){for(e=e.substring(r[0].length),h=0;h<l.align.length;h++)/^ *-+: *$/.test(l.align[h])?l.align[h]="right":/^ *:-+: *$/.test(l.align[h])?l.align[h]="center":/^ *:-+ *$/.test(l.align[h])?l.align[h]="left":l.align[h]=null;for(h=0;h<l.cells.length;h++)l.cells[h]=R(l.cells[h].replace(/^ *\| *| *\| *$/g,""),l.header.length);this.tokens.push(l)}else if(r=this.rules.lheading.exec(e))e=e.substring(r[0].length),this.tokens.push({type:"heading",depth:"="===r[2].charAt(0)?1:2,text:r[1]});else if(t&&(r=this.rules.paragraph.exec(e)))e=e.substring(r[0].length),this.tokens.push({type:"paragraph",text:"\n"===r[1].charAt(r[1].length-1)?r[1].slice(0,-1):r[1]});else if(r=this.rules.text.exec(e))e=e.substring(r[0].length),this.tokens.push({type:"text",text:r[0]});else if(e)throw new Error("Infinite loop on byte: "+e.charCodeAt(0));return this.tokens};var a={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:b,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(?!\s*\])((?:\\[\[\]]?|[^\[\]\\])+)\]/,nolink:/^!?\[(?!\s*\])((?:\[[^\[\]]*\]|\\[\[\]]|[^\[\]])*)\](?:\[\])?/,strong:/^__([^\s_])__(?!_)|^\*\*([^\s*])\*\*(?!\*)|^__([^\s][\s\S]*?[^\s])__(?!_)|^\*\*([^\s][\s\S]*?[^\s])\*\*(?!\*)/,em:/^_([^\s_])_(?!_)|^\*([^\s*<\[])\*(?!\*)|^_([^\s<][\s\S]*?[^\s_])_(?!_|[^\spunctuation])|^_([^\s_<][\s\S]*?[^\s])_(?!_|[^\spunctuation])|^\*([^\s<"][\s\S]*?[^\s\*])\*(?!\*|[^\spunctuation])|^\*([^\s*"<\[][\s\S]*?[^\s])\*(?!\*)/,code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:b,text:/^(`+|[^`])(?:[\s\S]*?(?:(?=[\\<!\[`*]|\b_|$)|[^ ](?= {2,}\n))|(?= {2,}\n))/};function r(e,t){if(this.options=t||E.defaults,this.links=e,this.rules=a.normal,this.renderer=this.options.renderer||new i,this.renderer.options=this.options,!this.links)throw new Error("Tokens array requires a `links` property.");this.options.pedantic?this.rules=a.pedantic:this.options.gfm&&(this.options.breaks?this.rules=a.breaks:this.rules=a.gfm)}function i(e){this.options=e||E.defaults}function o(){}function l(e){this.tokens=[],this.token=null,this.options=e||E.defaults,this.options.renderer=this.options.renderer||new i,this.renderer=this.options.renderer,this.renderer.options=this.options,this.slugger=new c}function c(){this.seen={}}function u(e,t){if(t){if(u.escapeTest.test(e))return e.replace(u.escapeReplace,(function(e){return u.replacements[e]}))}else if(u.escapeTestNoEncode.test(e))return e.replace(u.escapeReplaceNoEncode,(function(e){return u.replacements[e]}));return e}function p(e){return e.replace(/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi,(function(e,t){return t=t.toLowerCase(),"colon"===t?":":"#"===t.charAt(0)?"x"===t.charAt(1)?String.fromCharCode(parseInt(t.substring(2),16)):String.fromCharCode(+t.substring(1)):""}))}function m(e,t){return e=e.source||e,t=t||"",{replace:function(t,s){return s=s.source||s,s=s.replace(/(^|[^\[])\^/g,"$1"),e=e.replace(t,s),this},getRegex:function(){return new RegExp(e,t)}}}function d(e,t,s){if(e){try{var n=decodeURIComponent(p(s)).replace(/[^\w:]/g,"").toLowerCase()}catch(e){return null}if(0===n.indexOf("javascript:")||0===n.indexOf("vbscript:")||0===n.indexOf("data:"))return null}t&&!g.test(s)&&(s=function(e,t){h[" "+e]||(/^[^:]+:\/*[^/]*$/.test(e)?h[" "+e]=e+"/":h[" "+e]=_(e,"/",!0));return e=h[" "+e],"//"===t.slice(0,2)?e.replace(/:[\s\S]*/,":")+t:"/"===t.charAt(0)?e.replace(/(:\/*[^/]*)[\s\S]*/,"$1")+t:e+t}(t,s));try{s=encodeURI(s).replace(/%25/g,"%")}catch(e){return null}return s}a._punctuation="!\"#$%&'()*+,\\-./:;<=>?@\\[^_{|}~",a.em=m(a.em).replace(/punctuation/g,a._punctuation).getRegex(),a._escapes=/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g,a._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/,a._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/,a.autolink=m(a.autolink).replace("scheme",a._scheme).replace("email",a._email).getRegex(),a._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/,a.tag=m(a.tag).replace("comment",s._comment).replace("attribute",a._attribute).getRegex(),a._label=/(?:\[[^\[\]]*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,a._href=/<(?:\\[<>]?|[^\s<>\\])*>|[^\s\x00-\x1f]*/,a._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/,a.link=m(a.link).replace("label",a._label).replace("href",a._href).replace("title",a._title).getRegex(),a.reflink=m(a.reflink).replace("label",a._label).getRegex(),a.normal=f({},a),a.pedantic=f({},a.normal,{strong:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,em:/^_(?=\S)([\s\S]*?\S)_(?!_)|^\*(?=\S)([\s\S]*?\S)\*(?!\*)/,link:m(/^!?\[(label)\]\((.*?)\)/).replace("label",a._label).getRegex(),reflink:m(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",a._label).getRegex()}),a.gfm=f({},a.normal,{escape:m(a.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/,del:/^~+(?=\S)([\s\S]*?\S)~+/,text:/^(`+|[^`])(?:[\s\S]*?(?:(?=[\\<!\[`*~]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@))|(?= {2,}\n|[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@))/}),a.gfm.url=m(a.gfm.url,"i").replace("email",a.gfm._extended_email).getRegex(),a.breaks=f({},a.gfm,{br:m(a.br).replace("{2,}","*").getRegex(),text:m(a.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()}),r.rules=a,r.output=function(e,t,s){var n=new r(t,s);return n.output(e)},r.prototype.output=function(e){for(var t,s,n,a,i,o,l="";e;)if(i=this.rules.escape.exec(e))e=e.substring(i[0].length),l+=u(i[1]);else if(i=this.rules.tag.exec(e))!this.inLink&&/^<a /i.test(i[0])?this.inLink=!0:this.inLink&&/^<\/a>/i.test(i[0])&&(this.inLink=!1),!this.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(i[0])?this.inRawBlock=!0:this.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(i[0])&&(this.inRawBlock=!1),e=e.substring(i[0].length),l+=this.options.sanitize?this.options.sanitizer?this.options.sanitizer(i[0]):u(i[0]):i[0];else if(i=this.rules.link.exec(e)){var c=y(i[2],"()");if(c>-1){var p=4+i[1].length+c;i[2]=i[2].substring(0,c),i[0]=i[0].substring(0,p).trim(),i[3]=""}e=e.substring(i[0].length),this.inLink=!0,n=i[2],this.options.pedantic?(t=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(n),t?(n=t[1],a=t[3]):a=""):a=i[3]?i[3].slice(1,-1):"",n=n.trim().replace(/^<([\s\S]*)>$/,"$1"),l+=this.outputLink(i,{href:r.escapes(n),title:r.escapes(a)}),this.inLink=!1}else if((i=this.rules.reflink.exec(e))||(i=this.rules.nolink.exec(e))){if(e=e.substring(i[0].length),t=(i[2]||i[1]).replace(/\s+/g," "),t=this.links[t.toLowerCase()],!t||!t.href){l+=i[0].charAt(0),e=i[0].substring(1)+e;continue}this.inLink=!0,l+=this.outputLink(i,t),this.inLink=!1}else if(i=this.rules.strong.exec(e))e=e.substring(i[0].length),l+=this.renderer.strong(this.output(i[4]||i[3]||i[2]||i[1]));else if(i=this.rules.em.exec(e))e=e.substring(i[0].length),l+=this.renderer.em(this.output(i[6]||i[5]||i[4]||i[3]||i[2]||i[1]));else if(i=this.rules.code.exec(e))e=e.substring(i[0].length),l+=this.renderer.codespan(u(i[2].trim(),!0));else if(i=this.rules.br.exec(e))e=e.substring(i[0].length),l+=this.renderer.br();else if(i=this.rules.del.exec(e))e=e.substring(i[0].length),l+=this.renderer.del(this.output(i[1]));else if(i=this.rules.autolink.exec(e))e=e.substring(i[0].length),"@"===i[2]?(s=u(this.mangle(i[1])),n="mailto:"+s):(s=u(i[1]),n=s),l+=this.renderer.link(n,null,s);else if(this.inLink||!(i=this.rules.url.exec(e))){if(i=this.rules.text.exec(e))e=e.substring(i[0].length),this.inRawBlock?l+=this.renderer.text(this.options.sanitize?this.options.sanitizer?this.options.sanitizer(i[0]):u(i[0]):i[0]):l+=this.renderer.text(u(this.smartypants(i[0])));else if(e)throw new Error("Infinite loop on byte: "+e.charCodeAt(0))}else{if("@"===i[2])s=u(i[0]),n="mailto:"+s;else{do{o=i[0],i[0]=this.rules._backpedal.exec(i[0])[0]}while(o!==i[0]);s=u(i[0]),n="www."===i[1]?"http://"+s:s}e=e.substring(i[0].length),l+=this.renderer.link(n,null,s)}return l},r.escapes=function(e){return e?e.replace(r.rules._escapes,"$1"):e},r.prototype.outputLink=function(e,t){var s=t.href,n=t.title?u(t.title):null;return"!"!==e[0].charAt(0)?this.renderer.link(s,n,this.output(e[1])):this.renderer.image(s,n,u(e[1]))},r.prototype.smartypants=function(e){return this.options.smartypants?e.replace(/---/g,"—").replace(/--/g,"–").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1‘").replace(/'/g,"’").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1“").replace(/"/g,"”").replace(/\.{3}/g,"…"):e},r.prototype.mangle=function(e){if(!this.options.mangle)return e;for(var t,s="",n=e.length,a=0;a<n;a++)t=e.charCodeAt(a),Math.random()>.5&&(t="x"+t.toString(16)),s+="&#"+t+";";return s},i.prototype.code=function(e,t,s){var n=(t||"").match(/\S*/)[0];if(this.options.highlight){var a=this.options.highlight(e,n);null!=a&&a!==e&&(s=!0,e=a)}return n?'<pre><code class="'+this.options.langPrefix+u(n,!0)+'">'+(s?e:u(e,!0))+"</code></pre>\n":"<pre><code>"+(s?e:u(e,!0))+"</code></pre>"},i.prototype.blockquote=function(e){return"<blockquote>\n"+e+"</blockquote>\n"},i.prototype.html=function(e){return e},i.prototype.heading=function(e,t,s,n){return this.options.headerIds?"<h"+t+' id="'+this.options.headerPrefix+n.slug(s)+'">'+e+"</h"+t+">\n":"<h"+t+">"+e+"</h"+t+">\n"},i.prototype.hr=function(){return this.options.xhtml?"<hr/>\n":"<hr>\n"},i.prototype.list=function(e,t,s){var n=t?"ol":"ul",a=t&&1!==s?' start="'+s+'"':"";return"<"+n+a+">\n"+e+"</"+n+">\n"},i.prototype.listitem=function(e){return"<li>"+e+"</li>\n"},i.prototype.checkbox=function(e){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "},i.prototype.paragraph=function(e){return"<p>"+e+"</p>\n"},i.prototype.table=function(e,t){return t&&(t="<tbody>"+t+"</tbody>"),"<table>\n<thead>\n"+e+"</thead>\n"+t+"</table>\n"},i.prototype.tablerow=function(e){return"<tr>\n"+e+"</tr>\n"},i.prototype.tablecell=function(e,t){var s=t.header?"th":"td",n=t.align?"<"+s+' align="'+t.align+'">':"<"+s+">";return n+e+"</"+s+">\n"},i.prototype.strong=function(e){return"<strong>"+e+"</strong>"},i.prototype.em=function(e){return"<em>"+e+"</em>"},i.prototype.codespan=function(e){return"<code>"+e+"</code>"},i.prototype.br=function(){return this.options.xhtml?"<br/>":"<br>"},i.prototype.del=function(e){return"<del>"+e+"</del>"},i.prototype.link=function(e,t,s){if(e=d(this.options.sanitize,this.options.baseUrl,e),null===e)return s;var n='<a href="'+u(e)+'"';return t&&(n+=' title="'+t+'"'),n+=">"+s+"</a>",n},i.prototype.image=function(e,t,s){if(e=d(this.options.sanitize,this.options.baseUrl,e),null===e)return s;var n='<img src="'+e+'" alt="'+s+'"';return t&&(n+=' title="'+t+'"'),n+=this.options.xhtml?"/>":">",n},i.prototype.text=function(e){return e},o.prototype.strong=o.prototype.em=o.prototype.codespan=o.prototype.del=o.prototype.text=function(e){return e},o.prototype.link=o.prototype.image=function(e,t,s){return""+s},o.prototype.br=function(){return""},l.parse=function(e,t){var s=new l(t);return s.parse(e)},l.prototype.parse=function(e){this.inline=new r(e.links,this.options),this.inlineText=new r(e.links,f({},this.options,{renderer:new o})),this.tokens=e.reverse();for(var t="";this.next();)t+=this.tok();return t},l.prototype.next=function(){return this.token=this.tokens.pop(),this.token},l.prototype.peek=function(){return this.tokens[this.tokens.length-1]||0},l.prototype.parseText=function(){for(var e=this.token.text;"text"===this.peek().type;)e+="\n"+this.next().text;return this.inline.output(e)},l.prototype.tok=function(){switch(this.token.type){case"space":return"";case"hr":return this.renderer.hr();case"heading":return this.renderer.heading(this.inline.output(this.token.text),this.token.depth,p(this.inlineText.output(this.token.text)),this.slugger);case"code":return this.renderer.code(this.token.text,this.token.lang,this.token.escaped);case"table":var e,t,s,n,a="",r="";for(s="",e=0;e<this.token.header.length;e++)s+=this.renderer.tablecell(this.inline.output(this.token.header[e]),{header:!0,align:this.token.align[e]});for(a+=this.renderer.tablerow(s),e=0;e<this.token.cells.length;e++){for(t=this.token.cells[e],s="",n=0;n<t.length;n++)s+=this.renderer.tablecell(this.inline.output(t[n]),{header:!1,align:this.token.align[n]});r+=this.renderer.tablerow(s)}return this.renderer.table(a,r);case"blockquote_start":for(r="";"blockquote_end"!==this.next().type;)r+=this.tok();return this.renderer.blockquote(r);case"list_start":r="";for(var i=this.token.ordered,o=this.token.start;"list_end"!==this.next().type;)r+=this.tok();return this.renderer.list(r,i,o);case"list_item_start":r="";var l=this.token.loose,c=this.token.checked,u=this.token.task;for(this.token.task&&(r+=this.renderer.checkbox(c));"list_item_end"!==this.next().type;)r+=l||"text"!==this.token.type?this.tok():this.parseText();return this.renderer.listitem(r,u,c);case"html":return this.renderer.html(this.token.text);case"paragraph":return this.renderer.paragraph(this.inline.output(this.token.text));case"text":return this.renderer.paragraph(this.parseText());default:var m='Token with "'+this.token.type+'" type was not found.';if(!this.options.silent)throw new Error(m);console.log(m)}},c.prototype.slug=function(e){var t=e.toLowerCase().trim().replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-");if(this.seen.hasOwnProperty(t)){var s=t;do{this.seen[s]++,t=s+"-"+this.seen[s]}while(this.seen.hasOwnProperty(t))}return this.seen[t]=0,t},u.escapeTest=/[&<>"']/,u.escapeReplace=/[&<>"']/g,u.replacements={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},u.escapeTestNoEncode=/[<>"']|&(?!#?\w+;)/,u.escapeReplaceNoEncode=/[<>"']|&(?!#?\w+;)/g;var h={},g=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;function b(){}function f(e){for(var t,s,n=1;n<arguments.length;n++)for(s in t=arguments[n],t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e}function R(e,t){var s=e.replace(/\|/g,(function(e,t,s){for(var n=!1,a=t;--a>=0&&"\\"===s[a];)n=!n;return n?"|":" |"})),n=s.split(/ \|/),a=0;if(n.length>t)n.splice(t);else for(;n.length<t;)n.push("");for(;a<n.length;a++)n[a]=n[a].trim().replace(/\\\|/g,"|");return n}function _(e,t,s){if(0===e.length)return"";for(var n=0;n<e.length;){var a=e.charAt(e.length-n-1);if(a!==t||s){if(a===t||!s)break;n++}else n++}return e.substr(0,e.length-n)}function y(e,t){if(-1===e.indexOf(t[1]))return-1;for(var s=0,n=0;n<e.length;n++)if("\\"===e[n])n++;else if(e[n]===t[0])s++;else if(e[n]===t[1]&&(s--,s<0))return n;return-1}function k(e){e&&e.sanitize&&!e.silent&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options")}function E(e,t,s){if(null==e)throw new Error("marked(): input parameter is undefined or null");if("string"!=typeof e)throw new Error("marked(): input parameter is of type "+Object.prototype.toString.call(e)+", string expected");if(s||"function"==typeof t){s||(s=t,t=null),t=f({},E.defaults,t||{}),k(t);var a,r,i=t.highlight,o=0;try{a=n.lex(e,t)}catch(e){return s(e)}r=a.length;var c=function(e){if(e)return t.highlight=i,s(e);var n;try{n=l.parse(a,t)}catch(t){e=t}return t.highlight=i,e?s(e):s(null,n)};if(!i||i.length<3)return c();if(delete t.highlight,!r)return c();for(;o<a.length;o++)!function(e){"code"!==e.type?--r||c():i(e.text,e.lang,(function(t,s){return t?c(t):null==s||s===e.text?--r||c():(e.text=s,e.escaped=!0,void(--r||c()))}))}(a[o])}else try{return t&&(t=f({},E.defaults,t)),k(t),l.parse(n.lex(e,t),t)}catch(e){if(e.message+="\nPlease report this to https://github.com/markedjs/marked.",(t||E.defaults).silent)return"<p>An error occurred:</p><pre>"+u(e.message+"",!0)+"</pre>";throw e}}b.exec=b,E.options=E.setOptions=function(e){return f(E.defaults,e),E},E.getDefaults=function(){return{baseUrl:null,breaks:!1,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:new i,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,xhtml:!1}},E.defaults=E.getDefaults(),E.Parser=l,E.parser=l.parse,E.Renderer=i,E.TextRenderer=o,E.Lexer=n,E.lexer=n.lex,E.InlineLexer=r,E.inlineLexer=r.output,E.Slugger=c,E.parse=E,e.exports=E}(this||("undefined"!=typeof window?window:global))},LRgy:function(e,t,s){e.exports={wrapper:"wrapper--22fvk",button:"button--1KxxK","thumbs-up":"thumbs-up--13f7z",thumbsUp:"thumbs-up--13f7z","thumbs-down":"thumbs-down--1COzs",thumbsDown:"thumbs-down--1COzs"}},Y6V1:function(e,t,s){e.exports={"toggle-button":"toggle-button--e3slL",toggleButton:"toggle-button--e3slL","sidebar-open":"sidebar-open--1J5P2",sidebarOpen:"sidebar-open--1J5P2","toggle-text":"toggle-text--1z6MQ",toggleText:"toggle-text--1z6MQ",mobile:"mobile--KLenp"}},nYU1:function(e,t,s){e.exports={"show-more-link":"show-more-link--2vTND",showMoreLink:"show-more-link--2vTND"}},sdAw:function(e,t,s){"use strict";s.r(t);var n=s("lSNA"),a=s.n(n),r=s("q1tI"),i=s.n(r),o=s("17x9"),l=s.n(o),c=s("kX0S"),u=s("d2gv"),p=s.n(u),m=s("cr+I"),d=s("TSYQ"),h=s.n(d),g=s("YcKG"),b=s.n(g),f=s("Mwj6"),R=s("O84i"),_=s("sflt"),y=s("NtzC"),k=s("gPwu");var E=e=>({type:k.a.SET,comments:e,count:e?e.length:0}),v=s("dZ99"),w=s("aK6K"),S=s("pF64"),x=s("fT5s"),C=s("0pXI");var T=(e,t,s)=>n=>n(Object(C.a)("Document Read",{"Document ID":e,"Page Count":t,"Reading Time":s})),O=s("jiZR"),N=s("1dGI");var D=e=>({type:O.SET_ELASTIC_DOCUMENTS,documents:e?e.map(N.c):e}),q=s("NsRu");var I=e=>({type:q.SET_SEEN_DOCUMENTS_COUNT,seenDocumentsCount:e}),M=s("SgqP");var P=e=>({type:q.SET_INITIAL_PERSONAL_INFO,payload:{inTrial:e}}),A=s("ZH6w");var j=(e={})=>({type:A.a.SET_QUERY_PARAMS,params:e}),L=s("nYh4"),z=s("sFzn"),$=s("jWjh"),B=s("k9ah"),U=s("IkD9"),F=s.n(U),H=s("Pqt4");const W=(e,t)=>({"Document ID":e.id,Title:e.title,"New Title":e.new_title,"Upload Date":new Date(e.created_at).toISOString(),Downloads:e.downloads,Premium:e.premium||e.isPremium?1:0,Rating:e.rating,"Comment Count":t.length,"Has Direct Book Connection":Boolean(e.book_id),"Document Source":e.source,...e.course&&{"Course ID":e.course.id,"Course Code":e.course.code,"Course Name":e.course.name,...e.course.institution&&{"University ID":e.course.institution.id,"University Name":e.course.institution.name,"University Stage":e.course.institution.phase,...e.course.institution.country&&{"University Country ID":e.course.institution.country.id,"University Country Name":e.course.institution.country.name}}},"University Model":e.isFreeUniDocument?"Open":"Closed",...e.originalCategoryId&&{"Category ID":e.originalCategoryId,"Category Name":e.category_name}}),Z=(e,t)=>{const s=t(),n=W(s.document.current,s.comment.comments);return F.a.track("Report Clicked",n)};var G=s("vDqi"),V=s.n(G),K=s("Elhd"),Y=s.n(K),Q=s("PMJz");const X=(e=null)=>{e=Object(N.c)(e);const t=e.category.id===H.b.PAST_EXAMS?H.c.MISSING_ANSWERS:H.c.WRONG_COURSE;return{type:O.SET_DOCUMENT_REPORT_MODAL,step:H.d.PICK_REASON,currentReason:t}},J=(e,t=null)=>(s,n)=>V.a.post(Y.a.route("api.documents.report.store",{documentId:n().document.current.id}),{reasonId:e,...t&&{extraData:JSON.stringify(t)}}).then(()=>{s((e=>(t,s)=>{const n=s();let a;switch(e){case H.c.OTHER:a={"Report Reason":"Other","Report Reason ID":e};break;case H.c.MISSING_ANSWERS:a={"Report Reason":"Missing Answers","Report Reason ID":e};break;case H.c.WRONG_COURSE:a={"Report Reason":"Wrong Course","Report Reason ID":e};break;case H.c.WRONG_METADATA:a={"Report Reason":"Title/Description","Report Reason ID":e};break;case H.c.BAD_CONTENT:a={"Report Reason":"Quality","Report Reason ID":e};break;case H.c.CANT_READ:a={"Report Reason":"Readability","Report Reason ID":e}}const r=W(n.document.current,n.comment.comments);return F.a.track("Report Submitted",{...r,...a})})(e)),s({type:O.SUBMIT_REPORT})}).catch(e=>{throw s(Object(Q.a)()),e});var ee=s("mFh+");var te=(e=null)=>({type:O.SET_PREVIEW_TEXT,payload:e}),se=s("hSgt");var ne=e=>({type:O.SET_EXIT_POPUP_SHOWN,exitPopUpShown:e});var ae=e=>t=>(t(Object(C.a)("Viewer Exit Popup Shown",{"Time to Show":`${e} Seconds`})),Promise.all([V.a.post(Y.a.route("api.exit.popup.shown")),t(ne(!1))])),re=s("B8p9");var ie=(e,t,s,n)=>a=>a(Object(re.a)("Related Document Clicked",{"Related Document Position":e,"Related Document Count":t,Origin:n},s)),oe=s("v+l3"),le=s("nQnF"),ce=s("BdiA"),ue=s("xVrC"),pe=s("GN0R"),me=s("rtp2"),de=s("xZ14"),he=s("77Ab"),ge=s("yM03"),be=s("2iE4");const fe={onReasonChange:l.a.func.isRequired,currentReason:l.a.number.isRequired,onSubmit:l.a.func.isRequired,onCancelClick:l.a.func.isRequired,submitButtonText:l.a.string.isRequired,submitting:l.a.bool.isRequired,course:l.a.object.isRequired,showMissingAnswers:l.a.bool.isRequired};class Re extends r.Component{constructor(...e){super(...e),a()(this,"state",{customReason:"",error:""}),a()(this,"handlePickReason",e=>{this.props.onReasonChange(H.d.PICK_REASON,parseInt(e.target.value,10))}),a()(this,"handleChangeCustomReason",e=>{this.setState({customReason:e.target.value})}),a()(this,"handleSubmit",e=>{let t;e.preventDefault(),this.props.currentReason!==H.c.OTHER||(t=this.state.customReason&&this.state.customReason.trim(),t)?this.props.onSubmit(this.props.currentReason,{customReason:t}):this.setState({error:p.a.get("report_document_error_provide_report_details")})}),a()(this,"renderReasonRadioButton",(e,t=!0,s="")=>{let n;return t&&(n=i.a.createElement("p",{className:"text-light-gray"},s||p.a.get(`report_document_reason_${e}_description`))),i.a.createElement("div",{className:"form-group radio-stu"},i.a.createElement("input",{type:"radio",name:"report-reason",id:e,value:e,checked:this.props.currentReason===e,onChange:this.handlePickReason}),i.a.createElement("div",null,i.a.createElement("label",{htmlFor:e,className:"font-big"},p.a.get(`report_document_reason_${e}`)),n))})}render(){let e;return this.props.currentReason===H.c.OTHER&&(e=i.a.createElement("div",{className:"form-group"},i.a.createElement("label",{htmlFor:"extra-information"},p.a.get("report_reason_extra_information")),i.a.createElement("textarea",{id:"extra-information",name:"extra-information",className:"form-control-stu textarea-stu",value:this.state.customReason,onChange:this.handleChangeCustomReason}))),i.a.createElement("form",{className:"form",onSubmit:this.handleSubmit},i.a.createElement(be.k.Body,null,this.state.error&&i.a.createElement(be.a,{type:"danger"},this.state.error),this.props.showMissingAnswers&&this.renderReasonRadioButton(H.c.MISSING_ANSWERS),this.renderReasonRadioButton(H.c.WRONG_COURSE,!0,p.a.get(`report_document_reason_${H.c.WRONG_COURSE}_description`,{courseName:this.props.course.name})),this.renderReasonRadioButton(H.c.WRONG_METADATA),this.renderReasonRadioButton(H.c.BAD_CONTENT),this.renderReasonRadioButton(H.c.CANT_READ),this.renderReasonRadioButton(H.c.OTHER,!1),e),i.a.createElement(be.k.Footer,null,i.a.createElement(be.d,null,i.a.createElement(be.k.CancelButton,null,p.a.get("cancel")),i.a.createElement(be.k.SubmitButton,{component:be.e,type:"submit",loading:this.props.submitting,disabled:this.props.submitting},this.props.submitButtonText))))}}Re.propTypes=fe;var _e=Re,ye=s("40VN"),ke=s("Rj/V"),Ee=s("BXQg");const ve={onSubmit:l.a.func.isRequired,onPreviousClick:l.a.func.isRequired,institution:l.a.object.isRequired,user:l.a.object.isRequired};class we extends r.Component{constructor(...e){super(...e),a()(this,"state",{institution:this.props.institution,course:we.initialState.course,submitting:!1}),a()(this,"handleSubmit",e=>{e.preventDefault(),this.setState({submitting:!0}),this.props.onSubmit(H.c.WRONG_COURSE,{institutionId:parseInt(this.state.institution.id),courseId:parseInt(this.state.course.id)}),this.setState({institution:this.props.institution,course:we.initialState.course})}),a()(this,"handleInstitutionChanged",e=>{e&&e.id?this.setState({institution:e,course:we.initialState.course}):this.setState({course:we.initialState.course,institution:we.initialState.institution})}),a()(this,"handleCourseSelected",e=>{this.setState({course:e})}),a()(this,"handleCourseChange",e=>this.setState(t=>({course:{...t.course,name:e}})))}render(){const e=this.state.submitting||!this.state.institution.id||!this.state.course.id;return(i.a.createElement("form",{className:"form report-document-modal__course-edit-form",onSubmit:this.handleSubmit},i.a.createElement(be.k.Body,null,i.a.createElement("div",{className:"form-group"},i.a.createElement("label",{htmlFor:"search-wrapper-institution-institution",className:"label-name"},p.a.get("institution")),i.a.createElement(ye.a,{id:"institution",type:"institution",institutionId:parseInt(this.state.institution.id,10),value:this.state.institution,displayProperty:"name",onChange:this.handleInstitutionChanged,placeholder:p.a.get("search_institution"),onClear:this.handleInstitutionChanged,spinner:!0})),i.a.createElement("div",{className:"form-group"},i.a.createElement("label",{htmlFor:"search-wrapper-institution-institution",className:"label-name"},p.a.get("course")),i.a.createElement(Ee.a,{layout:"small",formControlStyle:!0,disabled:!this.state.institution.id},i.a.createElement(ke.a,{id:"search-wrapper-course",type:"course",resultsNumber:4,resultsClassName:"search-input-dropdown",wrapperClassName:"searchBar__results searchBar__suggestionList",placeholder:this.state.institution.id?p.a.get("search_code_name"):p.a.get("institution_mandatory"),onSelect:this.handleCourseSelected,autofocus:!0,spinner:!0,institutionId:parseInt(this.state.institution.id,10),disabled:!this.state.institution.id,user:this.props.user,showAddButtons:!0,inputTestSelector:"report-document-course-input",value:this.state.course.name,onChange:this.handleCourseChange})))),i.a.createElement(be.k.Footer,null,i.a.createElement(be.d,null,i.a.createElement(be.k.CancelButton,{onClick:this.props.onPreviousClick},p.a.get("previous")),i.a.createElement(be.k.SubmitButton,{component:be.e,type:"submit",loading:this.state.submitting,disabled:e},p.a.get("send"))))))}}a()(we,"initialState",{course:{id:null,name:""},institution:{id:null,name:""}}),we.propTypes=ve;var Se=we,xe=(s("4Brf"),s("ANjH")),Ce=s("/MKj"),Te=s("Yw+G"),Oe=s("pJVQ"),Ne=s("IoCO"),De=s("W4C7"),qe=s("dq6K"),Ie=s("8R9t"),Me=s("lBLp");const Pe={onSubmit:l.a.func.isRequired,onPreviousClick:l.a.func.isRequired,document:l.a.object.isRequired,...Te.a};class Ae extends r.Component{constructor(...e){super(...e),a()(this,"handleSubmit",e=>{const t={documentTitle:e["document-title"],documentDescription:e["document-description"],examContent:e["exam-content"],examYear:e["exam-year"],examMonth:e["exam-month"],examDay:e["exam-day"]};this.props.onSubmit(H.c.WRONG_METADATA,null,t)})}render(){let e,t;return 4===this.props.document.category.id&&(e=i.a.createElement("div",{className:"form-group"},i.a.createElement("div",{className:"radio-checkbox-group"},i.a.createElement(De.c,{name:"exam-content",label:p.a.get("exam_content"),options:this.props.examContentTypes}))),t=this.props.examDates.map((e,t)=>i.a.createElement("div",{className:"select-field",key:`examDates_${t}`},i.a.createElement(Me.a,{name:e.name,placeholder:e.placeholder,options:e.options,labelKey:"label",valueKey:"value"}))),t=i.a.createElement("div",{className:"form-group report-document-modal__exam-date-form-group"},i.a.createElement("label",null,p.a.get("exam_date")),i.a.createElement("div",null,t))),i.a.createElement("form",{className:"form report-document-modal__document-metadata-edit-form",onSubmit:this.props.handleSubmit(this.handleSubmit)},i.a.createElement(be.k.Body,null,i.a.createElement(qe.a,{name:"document-title",placeholder:"title","data-hj-whitelist":!0,label:p.a.get("title")}),i.a.createElement(Ie.a,{name:"document-description",label:p.a.get("description"),placeholder:p.a.get("description"),"data-hj-whitelist":!0}),e,t),i.a.createElement(be.k.Footer,null,i.a.createElement(be.d,null,i.a.createElement(be.k.CancelButton,{onClick:this.props.onPreviousClick},p.a.get("previous")),i.a.createElement(be.k.SubmitButton,{component:be.e,type:"submit",loading:this.props.submitting,disabled:this.props.submitting},p.a.get("send")))))}}Ae.propTypes=Pe;var je=Object(xe.d)(Object(Ce.connect)((e,t)=>{let s=Object(Ne.a)(e.document.uploaderConfig.exams.dates);return s=[{name:"exam-day",dataTestSelector:"exam-day",...s.days},{name:"exam-month",dataTestSelector:"exam-month",...s.months},{name:"exam-year",dataTestSelector:"exam-year",...s.years}],{initialValues:{"document-title":t.document.title,"document-description":t.document.description,...4===t.document.category.id&&{"exam-content":`${t.document.exam.content}`,"exam-year":t.document.exam.year,"exam-month":t.document.exam.month,"exam-day":t.document.exam.day}},examContentTypes:Object.keys(H.e).map(e=>({name:"exam-content",label:p.a.get(e.toLowerCase()),value:`${H.e[e]}`,dataTestSelector:`exam-content-${H.e[e]}-option`})),examDates:s}}),Object(Oe.a)({form:"ReportDocumentMetadataEditForm"}))(Ae),Le=s("YzHk");const ze={show:l.a.bool.isRequired,document:l.a.object.isRequired,course:l.a.object.isRequired,user:l.a.object.isRequired,title:l.a.string.isRequired,currentReason:l.a.number.isRequired,step:l.a.string.isRequired,onHide:l.a.func.isRequired,reportSubmit:l.a.func.isRequired,handleChangeStepReason:l.a.func.isRequired};class $e extends r.Component{constructor(...e){super(...e),a()(this,"state",{submitting:!1}),a()(this,"handleReasonPickerSubmit",(e,t=null)=>{switch(this.props.currentReason){case H.c.WRONG_COURSE:return this.props.handleChangeStepReason(H.d.PICK_COURSE,this.props.currentReason);case H.c.WRONG_METADATA:return this.props.handleChangeStepReason(H.d.EDIT_METADATA,this.props.currentReason);default:return this.handleReportSubmit(e,t)}}),a()(this,"handleReportSubmit",(e,t=null)=>{this.setState({submitting:!0}),this.props.reportSubmit(e,t)}),a()(this,"handlePreviousClick",()=>this.props.handleChangeStepReason(H.d.PICK_REASON,this.props.currentReason)),a()(this,"renderStep",e=>{const t=[H.c.WRONG_COURSE,H.c.WRONG_METADATA],s=this.props.document.category.id===H.b.PAST_EXAMS&&this.props.document.exam.content===H.e.EXAM_QUESTIONS_ANSWERS;switch(e){case H.d.PICK_REASON:return i.a.createElement(_e,{onReasonChange:this.props.handleChangeStepReason,currentReason:this.props.currentReason,onSubmit:this.handleReasonPickerSubmit,onCancelClick:this.props.onHide,course:this.props.course,submitButtonText:t.includes(this.props.currentReason)?p.a.get("next"):p.a.get("send"),showMissingAnswers:s,submitting:this.state.submitting});case H.d.PICK_COURSE:return i.a.createElement(Se,{onSubmit:this.handleReportSubmit,onPreviousClick:this.handlePreviousClick,institution:this.props.course.institution,user:this.props.user});case H.d.EDIT_METADATA:return i.a.createElement(je,{onSubmit:this.handleReportSubmit,onPreviousClick:this.handlePreviousClick,document:this.props.document});case H.d.REPORT_SUBMITTED:return i.a.createElement("div",{},i.a.createElement(be.k.Body,{className:"text-center"},i.a.createElement(Le.a,null),i.a.createElement("p",null,p.a.get("your_contribution_will_help_students"))),i.a.createElement(be.k.Footer,null,i.a.createElement(be.k.CancelButton,{},p.a.get("close"))));default:return null}})}render(){return i.a.createElement(be.k,{show:this.props.show,onHide:this.props.onHide,className:"report-document-modal"},i.a.createElement(be.k.Header,null,this.props.title),this.renderStep(this.props.step))}}$e.propTypes=ze;var Be=Object(c.connect)(e=>({document:Object(N.c)(e.document.current),course:e.course.current,user:e.user,currentReason:e.document.reportModal.currentReason,step:e.document.reportModal.step}),e=>({reportSubmit:(t,s=null)=>e(J(t,s)),handleChangeStepReason:(t,s)=>e(((e,t)=>({type:O.SET_DOCUMENT_REPORT_MODAL,step:e,currentReason:t}))(t,s))}))($e),Ue=s("77UF");class Fe extends r.Component{constructor(...e){super(...e),a()(this,"interval",null)}componentDidMount(){let e=0;const{repeat:t}=this.props;let{lapTime:s}=this.props;Object(Ue.c)(s)||(s=[s]),this.interval=window.setInterval(()=>{document.hidden||(e+=1,s.includes(e)&&this.props.onTimerReachLap(e),Math.max(...s)<=e&&(t?e=0:window.clearInterval(this.interval)))},1e3)}render(){return i.a.createElement(r.Fragment,null)}}a()(Fe,"propTypes",{onTimerReachLap:l.a.func,lapTime:l.a.oneOfType([l.a.number,l.a.arrayOf(l.a.number)]).isRequired,repeat:l.a.bool}),a()(Fe,"defaultProps",{onTimerReachLap:Ue.i});var He=Fe,We=s("E51F"),Ze=s.n(We),Ge=s("DlQD"),Ve=s.n(Ge),Ke=s("IP2g");const Ye=new Ve.a.Renderer({});Ye.heading=(e,t)=>{if(e.trim().length)return t>1?`<h${t}>${e}</h${t}>`:e};var Qe=s("DHZf"),Xe=s("Xv2y"),Je=s("HxAO"),et=s("2p++"),tt=s("bTYe");const st={document:l.a.object.isRequired,course:l.a.object.isRequired,configBookCategories:l.a.array.isRequired};function nt({document:e,course:t,configBookCategories:s}){var n;const a=[i.a.createElement("li",{key:"institution",className:"first-info"},i.a.createElement("span",null,p.a.get("institution")),i.a.createElement("p",null,i.a.createElement(tt.a,{institution:t.institution}))),i.a.createElement("li",{key:"course"},i.a.createElement("span",null,p.a.get("course")),i.a.createElement("p",null,i.a.createElement(et.a,{course:t})))];if(null===e.book&&s.includes(e.category_id)&&(null==t?void 0:null===(n=t.books)||void 0===n?void 0:n.length)>0){const e=t.books.slice(0,5).map(e=>i.a.createElement("a",{href:b.a.book(e),key:e.id},e.title));a.push(i.a.createElement("li",{key:"listedBooks"},i.a.createElement("span",null,p.a.get("listed_books")),i.a.createElement("p",null,e)))}if(e.book&&(a.push(i.a.createElement("li",{key:"bookTitle"},i.a.createElement("span",null,p.a.get("book_title")),i.a.createElement("a",{href:b.a.book(e.book)},e.book.title))),a.push(i.a.createElement("li",{key:"authors"},i.a.createElement("span",null,p.a.get("author")),i.a.createElement("p",null,e.book.author)))),!e.anonymous&&e.user&&""!==e.user.first_name&&""!==e.user.last_name&&0!==e.user.id){const t=i.a.createElement("a",{rel:"nofollow",href:Y.a.route("userProfile",{id:e.user_id})},`${e.user.first_name} ${e.user.last_name}`);a.push(i.a.createElement("li",{key:"uploader"},i.a.createElement("span",null,p.a.get("uploader")),i.a.createElement("p",null,t)))}return e.academic_year&&a.push(i.a.createElement("li",{key:"academicYear"},i.a.createElement("span",null,p.a.get("academic_year")),i.a.createElement("p",null,e.academic_year))),i.a.createElement("ul",{className:"doc-info"},a)}nt.propTypes=st;var at=nt,rt=s("pQ8y"),it=s("VeD8"),ot=s("Ts+D");var lt=e=>t=>F.a.track("Comment Posted",e).then(()=>t({type:ot.TRACK_COMMENT_SUBMITTED})).catch(Ue.i),ct=s("Fmmj");var ut=(e,t,s,n,a="Comment")=>r=>{const i=(new Date).getTime();return r(((e,t)=>({type:k.a.SUBMIT,comment:e,commentType:t}))({submitting:!0,checked:0,deleted:0,updated:null,comment:e,created:i,id:i,secondary_type_id:null,type:t,type_id:s,user:n,user_id:n.id},t)),V.a.post(Y.a.route("APIcommentSubmit"),{comment:e,type:t,id:s,comment_nature:a}).then(e=>{var t,s;r((t=i,s=e.data.data.comment.id,{type:k.a.UPDATE_ID,commentId:t,newCommentId:s})),r(lt(e.data.data.event.properties))}).catch(e=>{var s,n;throw r((s=i,n=t,{type:k.a.DESTROY,commentId:s,commentType:n})),r(Object(Q.a)(Object(ct.a)(e))),e})};var pt=(e,t)=>s=>V.a.post(Y.a.route("APIcommentDestroy"),{commentId:e}).then(()=>s(((e,t)=>({type:k.a.DESTROY,commentId:e,commentType:t}))(e,t)));var mt=(e,t,s)=>n=>V.a.post(Y.a.route("APIcommentGetMore"),{type:e,id:t,offset:s}).then(e=>n((e=>({type:k.a.GET_MORE,commentObject:e.data}))(e.data))).catch(e=>e),dt=s("pVnL"),ht=s.n(dt),gt=s("S3e9"),bt=s("V0l7");class ft extends i.a.Component{render(){return i.a.createElement("div",null,i.a.createElement(bt.a,{size:"small",linkToProfile:!0}),i.a.createElement("form",{onSubmit:this.props.handleSubmit(this.props.onCommentSubmit),className:"comment-form comment-user-write"},i.a.createElement(Ie.a,{name:"comment",placeholder:p.a.get("write_comment"),ref:this.props.innerRef,disabled:this.props.submitting,hideErrors:!this.props.submitFailed}),i.a.createElement(be.c,{color:"light",type:"submit",size:"small",className:"pull-right",disabled:this.props.submitting},p.a.get("post"))))}}a()(ft,"propTypes",{onCommentSubmit:l.a.func.isRequired,...Te.a});var Rt=Object(Oe.a)({validate:({comment:e})=>({comment:Object(gt.a)(e)}),onSubmitSuccess:(e,t,s)=>s.reset()})(i.a.forwardRef((e,t)=>i.a.createElement(ft,ht()({innerRef:t},e)))),_t=s("WKbj");class yt extends r.Component{constructor(...e){super(...e),a()(this,"state",{replying:!1}),a()(this,"handleRemoveComment",()=>{this.props.onRemove(this.props.comment.id)}),a()(this,"handleToggleCommentForm",()=>{this.setState(e=>({replying:!e.replying}))})}render(){let e,t,s;return this.props.user&&!this.props.comment.submitting&&(this.props.user.canDeleteAllComments||this.props.user.canDeleteComments&&this.props.user.id===this.props.comment.user_id)&&(e=i.a.createElement("div",{className:"pull-right"},i.a.createElement(Ke.a,{icon:"times",className:"remove-comment",size:"xs",onClick:this.handleRemoveComment}))),this.props.user&&this.props.user.isLoggedIn&&"comment"!==this.props.comment.type&&(t=this.state.replying?i.a.createElement("a",{className:"user-reply cancel-reply-toggle",onClick:this.handleToggleCommentForm},i.a.createElement("small",null,p.a.get("cancel"))):i.a.createElement("a",{className:"user-reply reply-toggle",onClick:this.handleToggleCommentForm},i.a.createElement("small",null,p.a.get("reply")))),null!==this.props.comment.user&&(s=this.props.comment.user.firstName),i.a.createElement("div",{key:`manager_${this.props.comment.id}`},i.a.createElement("li",{id:`comment-${this.props.comment.id}`,className:h()("comment-user-post clearfix",{"comment-user-post--submitting":this.props.comment.submitting})},i.a.createElement(be.b,{size:"small",user:this.props.comment.user,linkToProfile:!0}),i.a.createElement("div",{className:"comment-user-txt"},i.a.createElement("span",null,i.a.createElement("a",{rel:"nofollow",href:Y.a.route("userProfile",{id:this.props.comment.user_id})},s),"•",i.a.createElement(_t.a,{timestamp:this.props.comment.created,className:"comment-formatted-time"})),e,this.props.comment.comment.split("\n").map((e,t)=>i.a.createElement("p",{key:t,className:"comment-user-txt-write"},e)),t)),i.a.createElement(wt,{parentId:this.props.comment.id,showForm:this.state.replying,onSubmit:this.handleToggleCommentForm,type:"comment",id:this.props.comment.id}))}}a()(yt,"propTypes",{comment:l.a.object.isRequired,onRemove:l.a.func,user:l.a.object});var kt=Object(Ce.connect)()(yt),Et=s("CMp5");class vt extends r.Component{constructor(...e){super(...e),a()(this,"state",{showRemoveCommentModal:!1}),a()(this,"handleShowRemoveCommentModal",e=>{this.setState({commentIdToRemove:e,showRemoveCommentModal:!0})}),a()(this,"handleHideRemoveCommentModal",()=>{this.setState({showRemoveCommentModal:!1,commentIdToRemove:null})}),a()(this,"handleRemoveComment",()=>{const e=this.props.dispatch(pt(this.state.commentIdToRemove,this.props.type));return this.handleHideRemoveCommentModal(),e}),a()(this,"handleCommentSubmit",({comment:e})=>("function"==typeof this.props.onSubmit&&this.props.onSubmit(),this.props.dispatch(ut(e,this.props.type,this.props.id,this.props.user)))),a()(this,"handleMoreComments",()=>{this.props.dispatch(mt(this.props.type,this.props.id,this.props.offset))}),a()(this,"_mainTextarea",i.a.createRef())}componentDidUpdate(e){e.focusTextarea!==this.props.focusTextarea&&setTimeout(()=>this._mainTextarea.current.focus(),0)}render(){let e,t,s;this.props.user&&this.props.user.isLoggedIn&&(this.props.showForm||0===this.props.parentId)?e=i.a.createElement("li",{className:"comment-user-space clearfix"},i.a.createElement(Rt,{ref:this._mainTextarea,onCommentSubmit:this.handleCommentSubmit,form:`CommentForm-${this.props.parentId}`})):this.props.parentId||(e=i.a.createElement("li",{className:"comment-no-login"},p.a.get("login_for_comment"))),this.props.comments&&this.props.comments.length>0&&(t=this.props.comments.map(e=>i.a.createElement(rt.a,{key:e.id,classNames:"fadeIn",timeout:100},i.a.createElement(kt,{onRemove:this.handleShowRemoveCommentModal,comment:e,user:this.props.user}))));let n=this.props.commentCount-5;return!this.props.parentId&&n>0&&(n>5&&(n=5),s=i.a.createElement("div",{className:"mt1x",key:`moreComments${n}`},i.a.createElement(be.c,{size:"small-wide",color:"outline-primary",onClick:this.handleMoreComments},p.a.choice("show_last_comments",n,{commentCount:n})))),i.a.createElement("div",{className:h()({"comment-reply":this.props.parentId})},e,i.a.createElement(it.a,null,t),s,i.a.createElement(Et.a,{title:p.a.get("delete_comment"),show:this.state.showRemoveCommentModal,onYes:this.handleRemoveComment,onNo:this.handleHideRemoveCommentModal,yesTestSelector:"confirm-remove-comment-button"},p.a.get("delete_sure_comment")))}}a()(vt,"propTypes",{focusTextarea:l.a.bool,comments:l.a.array,commentCount:l.a.any,offset:l.a.number,parentId:l.a.number,type:l.a.string,id:l.a.any,showForm:l.a.bool,onSubmit:l.a.func,user:l.a.object,dispatch:l.a.func});var wt=Object(c.connect)((e,t)=>({comments:e.comment.comments.filter(e=>"comment"!==e.type&&0===t.parentId||e.type_id===t.parentId),type:0===t.parentId?e.comment.type:t.type,id:0===t.parentId?e.comment.id:t.id,user:e.user,offset:e.comment.offset,commentCount:e.comment.commentCount}))(vt),St=s("+6pD"),xt=s("BM24"),Ct=s("clHV"),Tt=s("wQmL");class Ot extends r.Component{constructor(...e){super(...e),a()(this,"handleFormSubmit",e=>this.props.handleCommentSubmit({...this.props.comment,text:e["comment-positive"]},this.props.user))}render(){let e=null;return this.props.show&&(e=i.a.createElement("div",{className:"comment-modal-form modal fade in"},i.a.createElement("div",{className:"modal-dialog"},i.a.createElement("div",{className:"modal-content"},i.a.createElement("div",{className:"modal-header"},i.a.createElement("h4",{className:"modal-title"},p.a.get("leave_comment"))),i.a.createElement("form",{onSubmit:this.props.handleSubmit(this.handleFormSubmit)},i.a.createElement("div",{className:"modal-body"},i.a.createElement(Ie.a,{id:"comment",name:"comment-positive",placeholder:p.a.get("leave_comment_desc"),minLength:10,maxLength:255})),i.a.createElement("div",{className:"modal-footer"},i.a.createElement(be.d,null,i.a.createElement(be.c,{color:"gray-text",type:"button",onClick:this.props.onDismiss},p.a.get("skip")),i.a.createElement(be.e,{type:"submit",loading:this.props.submitting,disabled:this.props.submitting},p.a.get("post"))))))))),e}}a()(Ot,"propTypes",{...Te.a});Ot=Object(Oe.a)({form:"CommentModalForm",validate:e=>({"comment-positive":Object(gt.a)(e["comment-positive"])})})(Ot);var Nt=Object(c.connect)(e=>({comment:{id:e.comment.id,type:e.comment.type},user:e.user}),(e,t)=>({handleCommentSubmit:(t,s)=>{e(ut(t.text,t.type,t.id,s,"Review"))},onSubmitSuccess:()=>{t.onDismiss(),Object(Tt.c)("CommentModalForm")}}))(Ot),Dt=s("ewcA"),qt=s("4V4G"),It=s.n(qt);const Mt={onHide:l.a.func.isRequired,onRate:l.a.func.isRequired,document:l.a.shape({id:l.a.number.isRequired,rating_positive:l.a.number.isRequired,rating_negative:l.a.number.isRequired,user_rating:l.a.number}).isRequired};function Pt({document:e,onRate:t,onHide:s}){return i.a.createElement("div",{className:It.a.popUp},i.a.createElement("button",{type:"button",className:It.a.closeButton,onClick:s},i.a.createElement(Ke.a,{icon:"times"})),i.a.createElement(be.t,{component:"div",size:"big",className:It.a.text},p.a.get("document_helpful")),i.a.createElement("div",{className:It.a.rateButtonsWrapper},i.a.createElement(St.a,{documentId:e.id,positiveRatings:e.rating_positive,negativeRatings:e.rating_negative,onRate:t,userRating:e.user_rating,ratingOrigin:"Overlay",readOnly:!1,showRatingText:!1})))}Pt.propTypes=Mt;var At=Pt;const jt={documentPreviewText:l.a.object.isRequired,configBookCategories:l.a.array.isRequired,className:l.a.string,user:l.a.shape({id:l.a.number,isLoggedIn:l.a.bool.isRequired,isStaff:l.a.bool.isRequired}).isRequired,onShowReportDocumentModal:l.a.func.isRequired,course:l.a.object.isRequired,document:l.a.object.isRequired,relatedStudylists:l.a.arrayOf(l.a.shape({id:l.a.number.isRequired,name:l.a.string.isRequired})),open:l.a.bool.isRequired,userHasCommented:l.a.bool.isRequired,onSidebarToggle:l.a.func.isRequired,relatedDocuments:l.a.array,shouldAskToRate:l.a.bool.isRequired,onRelatedDocumentClick:l.a.func.isRequired,onShowShareModal:l.a.func.isRequired};class Lt extends r.Component{constructor(...e){super(...e),a()(this,"state",{showOverlay:!1,showCommentModalForm:!1,open:!0,showAskToRate:!1,focusComment:!1}),a()(this,"handleVote",e=>{clearTimeout(this.askToRateTimeout);let t={rating:e,showOverlay:!1,showAskToRate:!1};this.props.user.isLoggedIn&&1===e&&!this.props.userHasCommented?t={...t,showOverlay:!0,showCommentModalForm:!0}:this.props.user.isLoggedIn&&-1===e&&!this.props.document.user_reported_document&&this.handleShowReportDocumentModal(!0),this.setState(t)}),a()(this,"handleRemoveOverlay",()=>{this.setState({showOverlay:!1,showAskToRate:!1,showCommentModalForm:!1})}),a()(this,"handleCommentButtonClicked",()=>{this.setState({focusComment:!0,open:!0},()=>{this.props.onSidebarToggle("Comment Button")})}),a()(this,"handleShowReportDocumentModal",e=>{this.handleRemoveOverlay(),this.props.onShowReportDocumentModal(e)}),a()(this,"handleRelatedDocumentClicked",(e,t,s,n)=>{const a=Object(f.a)(e);e.preventDefault(),this.props.onRelatedDocumentClick(t,s,n,a)})}static getDerivedStateFromProps(e,t){return e.open!==t.open?{open:e.open}:null}componentDidMount(){const e=()=>{this.state.showCommentModalForm||this.setState({showOverlay:!1,showAskToRate:!1,showCommentModalForm:!1})},t=()=>{this.setState({showOverlay:!0,showAskToRate:!0},()=>setTimeout(e,Qe.b))};this.props.shouldAskToRate&&(this.askToRateTimeout=setTimeout(t,Qe.a))}render(){let e,t,s,n,a,r;if(!this.props.document.description||this.props.document.description.includes("http")||this.props.document.description.includes("merged files")||(e=i.a.createElement(xt.a,{className:"comment",expandedClassName:"comment expanded",text:this.props.document.description})),this.props.user.isLoggedIn&&this.props.user.isStaff&&(t=i.a.createElement(be.c,{component:"a",size:"small-wide",color:"premium",href:Y.a.route("cmsDocumentEdit",{id:this.props.document.id}),rel:"noopener noreferrer",target:"_blank"},i.a.createElement(Ke.a,{icon:"pencil-alt"})," ",p.a.get("edit"))),this.props.relatedStudylists&&this.props.relatedStudylists.length&&(s=i.a.createElement("div",{className:"document-viewer-sidebar__related-material"},i.a.createElement("div",{className:"h3-stu comments"},p.a.get("related_studylists")),this.props.relatedStudylists.map((e,t)=>{const s=Y.a.route("studylists.show",{studylistId:e.id,name:Ze()(e.name)});return(i.a.createElement("a",{key:e.id,href:s,rel:"nofollow",title:e.name,className:"ic-text document-line"},i.a.createElement(Dt.a,{size:"small"}),i.a.createElement("span",{className:"text-ellipsis"},e.name)))}))),this.props.relatedDocuments&&this.props.relatedDocuments.length){const e=this.props.relatedDocuments.length;n=i.a.createElement("div",{className:"document-viewer-sidebar__related-material"},i.a.createElement("div",{className:"h3-stu"},p.a.get("related_documents")),this.props.relatedDocuments.map((t,s)=>i.a.createElement("a",{key:t.id,href:b.a.document(t),onClick:n=>{this.handleRelatedDocumentClicked(n,e,s+1,t)},className:"ic-text document-line",title:t.title},i.a.createElement(Ct.a,null),i.a.createElement("span",{className:"text-ellipsis"},t.title))))}return this.props.documentPreviewText.previewText&&(a=this.props.documentPreviewText.isMD?i.a.createElement("div",{className:"document-viewer-sidebar__preview"},i.a.createElement("div",{className:"h3-stu"},p.a.get("preview_text")),i.a.createElement("div",{className:"md",dangerouslySetInnerHTML:{__html:Ve()(this.props.documentPreviewText.previewText,{renderer:Ye})}})):i.a.createElement("div",{className:"document-viewer-sidebar__preview"},i.a.createElement("div",{className:"h3-stu"},p.a.get("preview_text")),i.a.createElement("textarea",{rows:5,value:this.props.documentPreviewText.previewText,readOnly:!0}))),this.props.user.isLoggedIn&&(r=i.a.createElement(be.c,{color:"light",size:"minimum",className:"light-social-button-wrapper__button",onClick:this.handleCommentButtonClicked},i.a.createElement(Ke.a,{icon:"comment"}))),i.a.createElement("div",{className:h()("document-viewer-sidebar",this.props.className,{"small-sidebar":!this.state.open})},i.a.createElement("div",{className:h()({hidden:!this.state.open})},i.a.createElement(de.a,{show:this.state.showOverlay,onClick:this.handleRemoveOverlay}),this.state.showAskToRate&&i.a.createElement(At,{document:this.props.document,onHide:this.handleRemoveOverlay,onRate:this.handleVote}),i.a.createElement(Nt,{show:this.state.showCommentModalForm,onDismiss:this.handleRemoveOverlay}),i.a.createElement("div",{className:"info-side-bar"},i.a.createElement("h1",{className:"doc-title"},this.props.document.title),e,t,i.a.createElement(at,{document:this.props.document,configBookCategories:this.props.configBookCategories,course:this.props.course,user:this.props.user}),i.a.createElement("div",{className:"document-info-row doc-rate-row"},i.a.createElement(St.a,{documentId:this.props.document.id,positiveRatings:this.props.document.rating_positive,negativeRatings:this.props.document.rating_negative,onRate:this.handleVote,readOnly:Boolean(this.props.document.preview||this.props.document.isMine),userRating:this.props.document.user_rating,showRatingText:!0,ratingOrigin:"Sidebar"})),this.props.user.isLoggedIn&&i.a.createElement("div",{className:"document-info-row report-flag-own-row"},i.a.createElement(be.c,{size:"minimum",color:"gray-text",onClick:()=>this.handleShowReportDocumentModal(!1)},i.a.createElement(Ke.a,{icon:"flag"}),i.a.createElement("span",null,p.a.get("report_document")))),i.a.createElement("div",{className:"share-button-wrapper"},i.a.createElement(be.c,{color:"light",type:"button",size:"small-wide",rel:"nofollow",onClick:this.props.onShowShareModal},i.a.createElement(Ke.a,{icon:"share"})," ",p.a.get("share"))),i.a.createElement("div",{className:"side-bar-comments"},i.a.createElement("div",{className:"h3-stu"},p.a.get("comments")),i.a.createElement("ul",{id:"comment-listing"},i.a.createElement(wt,{focusTextarea:this.state.focusComment,parentId:0}))),n,s,a)),i.a.createElement("div",{className:h()("light-social-button-wrapper",{hidden:this.state.open})},i.a.createElement(be.c,{color:"light",size:"minimum",className:"light-social-button-wrapper__button",onClick:this.props.onShowShareModal},i.a.createElement(Ke.a,{icon:"share"})),r))}}Lt.propTypes=jt,Lt.defaultProps={className:null,relatedStudylists:[],relatedDocuments:[]};var zt=Object(c.connect)(e=>{const{comments:t}=e.comment,s=e.comment.type,n=e.user.id;return{userHasCommented:t&&t.some(e=>e.type===s&&e.user_id===n),documentPreviewText:e.document.previewText||null,shouldAskToRate:Object(Xe.f)(e)}},e=>({onRelatedDocumentClick:(t,s,n,a)=>e(ie(s,t,{href:b.a.document(n),isNewTab:a},"Viewer Sidebar")),onShowShareModal:()=>e(Object(Je.a)("Sidebar"))}))(Lt);class $t extends r.PureComponent{render(){const e={"@context":"https://schema.org","@type":"CreativeWork",name:this.props.document.title,learningResourceType:this.props.document.category_name};if(this.props.document.description&&(e.about=this.props.document.description.substring(0,500)),this.props.terms&&(e.keywords=Object.keys(this.props.terms).slice(0,20).join(",")),this.props.meta.isMetering&&!this.props.document.preview){const t=this.props.document.pages-this.props.document.previewPages;if(t>0){e.isAccessibleForFree="False",e.hasPart=[];for(let s=1;s<=t;s++)e.hasPart.push({"@type":"WebPageElement",isAccessibleForFree:"False",cssSelector:`.paywall-section-${s}`})}}return(i.a.createElement(r.Fragment,null,i.a.createElement("script",{type:"application/ld+json",dangerouslySetInnerHTML:{__html:this.props.breadcrumb}}),i.a.createElement("script",{type:"application/ld+json",dangerouslySetInnerHTML:{__html:JSON.stringify(e)}})))}}a()($t,"propTypes",{document:l.a.object,breadcrumb:l.a.string,terms:l.a.array,meta:l.a.object});var Bt=s("pLk4"),Ut=s("kagA");const Ft={uniLanguage:l.a.string.isRequired,canonicalUrl:l.a.string,appDomains:l.a.object.isRequired,selectableLanguages:l.a.array.isRequired,document:l.a.shape({noIndex:l.a.number.isRequired}).isRequired,currentLocale:l.a.string,localizedCategoryName:l.a.string,allowedLanguageCategoryName:l.a.string,fallbackLanguages:l.a.object};class Ht extends r.PureComponent{render(){const{canonicalUrl:e}=this.props,t=Object(Bt.b)(this.props.selectableLanguages,this.props.uniLanguage,this.props.fallbackLanguages),s=Object(Bt.a)(this.props.currentLocale,t);return this.props.document.noIndex?i.a.createElement("meta",{name:"robots",content:"noindex"}):i.a.createElement(r.Fragment,null,i.a.createElement("meta",{property:"og:url",content:e}),i.a.createElement("link",{rel:"canonical",href:e}),s&&i.a.createElement(Ut.a,{giveBackAllLangs:!1,currentLanguage:t,langs:this.props.selectableLanguages,canonicalUrl:e.replace(Ze()(this.props.localizedCategoryName),Ze()(this.props.allowedLanguageCategoryName)),appDomains:this.props.appDomains}))}}Ht.propTypes=Ft;var Wt=s("kajk"),Zt=s("ps0s"),Gt=s("nYU1"),Vt=s.n(Gt);const Kt={show:l.a.bool.isRequired,cdn:l.a.shape({cdn_enabled:l.a.bool,aws_cloudfront_assets:l.a.string.isRequired}).isRequired,onHide:l.a.func.isRequired,user:l.a.shape({isLoggedIn:l.a.bool,allowsPremiumDocuments:l.a.bool,isPremium:l.a.bool,isStaff:l.a.bool}).isRequired,documentsQuantity:l.a.number,documents:l.a.arrayOf(l.a.shape({id:l.a.number.isRequired,title:l.a.string.isRequired,rating:l.a.shape({total:l.a.number.isRequired}).isRequired,category:l.a.shape({id:l.a.number.isRequired}).isRequired,course:l.a.shape({name:l.a.string.isRequired,code:l.a.string,institution:l.a.shape({name:l.a.string.isRequired,study_search_is_visible:l.a.bool}).isRequired}).isRequired,book:l.a.shape({title:l.a.string.isRequired,author:l.a.string.isRequired}),activeFile:l.a.shape({pages:l.a.number.isRequired}).isRequired,study:l.a.arrayOf(l.a.shape({name:l.a.string.isRequired})),premium:l.a.bool,created:l.a.number.isRequired,rating_positive:l.a.number.isRequired,rating_negative:l.a.number.isRequired,rating_past_15_months:l.a.number,rating_positive_past_15_months:l.a.number,rating_negative_past_15_months:l.a.number,rating_past_18_months:l.a.number,rating_positive_past_18_months:l.a.number,rating_negative_past_18_months:l.a.number})).isRequired,onShowMoreClick:l.a.func.isRequired,formatLanguage:l.a.string.isRequired,onDocumentClicked:l.a.func.isRequired,testRatingsTimeRange:l.a.string.isRequired},Yt=({documents:e,show:t,onHide:s,onShowMoreClick:n,testRatingsTimeRange:a,user:r,onDocumentClicked:o,cdn:l,formatLanguage:c,documentsQuantity:u=3})=>{const m=e.slice(0,u);return(i.a.createElement(be.k,{show:t,onHide:s,size:"large"},i.a.createElement(be.k.Header,null,p.a.get("not_the_document_looking_for")),i.a.createElement(be.k.Body,null,i.a.createElement("p",null,p.a.get("we_have_options_for_you")),m.map((e,t)=>i.a.createElement(Wt.a,{dataTestSelector:"document-related-documents-modal",key:e.id,id:e.id,url:b.a.document(e),positiveRating:e.rating_positive,negativeRating:e.rating_negative,testRatingsTimeRange:a,ratingPast15Months:e.rating_past_15_months,ratingPositivePast15Months:e.rating_positive_past_15_months,ratingNegativePast15Months:e.rating_negative_past_15_months,ratingPast18Months:e.rating_past_18_months,ratingPositivePast18Months:e.rating_positive_past_18_months,ratingNegativePast18Months:e.rating_negative_past_18_months,searchPos:t+1,user:r,name:e.title,rating:e.rating.total,premium:e.premium,is_viewable:e.is_viewable,categoryId:e.category.id,course:e.course,institution:e.course.institution,book:e.book,study:e.study,onElementClicked:e=>o(e,t+1,m.length),thumbnailUrl:Object(Zt.b)(e,l),largeThumbnailUrl:Object(Zt.b)(e,l,H.f),pages:e.activeFile.pages,examDate:e.exam,createdAt:e.created,formatLanguage:c,academicYear:e.academicYear}))),i.a.createElement(be.k.Footer,null,i.a.createElement("div",{className:"text-center"},i.a.createElement(be.c,{className:Vt.a.showMoreLink,color:"link",size:"minimum",onClick:n},p.a.get("show_more"))))))};Yt.propTypes=Kt;var Qt=Yt,Xt=s("CWhz");const Jt={show:l.a.bool.isRequired,onHide:l.a.func.isRequired};function es({show:e,onHide:t}){const s=Object(Ce.useSelector)(Xe.c),n=Object(Ce.useSelector)(Xe.e),a=Object(Ce.useSelector)(Xe.b),r=Object(Ce.useSelector)(Xe.a);return i.a.createElement(be.k,{show:e,onHide:t},i.a.createElement(be.k.Header,null,p.a.get("share_the_document")),i.a.createElement(be.k.Body,null,i.a.createElement(Xt.a,{shortUrl:s,whatsappUrl:n,messengerUrl:a,facebookUrl:r,socialShareTitle:p.a.get("share_on_social_medias"),urlShareTitle:p.a.get("share_url")})),i.a.createElement(be.k.Footer,null,i.a.createElement(be.k.CancelButton,null,p.a.get("close"))))}es.propTypes=Jt;var ts=i.a.memo(es),ss=s("Y6V1"),ns=s.n(ss);const as={isSidebarOpen:l.a.bool.isRequired,onClick:l.a.func.isRequired};function rs({isSidebarOpen:e,onClick:t}){const s=Object(Ce.useSelector)(e=>e.meta.isMobile),n=Object(Ce.useSelector)(_.d);return i.a.createElement(be.c,{size:"minimum",color:"clear",type:"button",className:h()(ns.a.toggleButton,{[ns.a.sidebarOpen]:e,"hidden-xs":!e&&n}),onClick:t},i.a.createElement(Ke.a,{icon:`angle-double-${e?"left":"right"}`,size:"1x"}),e&&i.a.createElement("span",{className:h()(ns.a.toggleText,{[ns.a.mobile]:s&&n})},p.a.get("hide")))}rs.propTypes=as;var is=rs;const os={cdn:l.a.object.isRequired,formatLanguage:l.a.string.isRequired,testRatingsTimeRange:l.a.string.isRequired,meta:l.a.shape({isMetering:l.a.bool.isRequired}).isRequired,user:l.a.shape({isLoggedIn:l.a.bool.isRequired}).isRequired,config:l.a.shape({app:l.a.object.isRequired}),course:l.a.shape({institution:l.a.object.isRequired}).isRequired,document:l.a.shape({pages:l.a.number.isRequired,assets:l.a.object.isRequired,course:l.a.object.isRequired,active_file:l.a.object.isRequired}).isRequired,language:l.a.string.isRequired,docConfig:l.a.shape({bookCategories:l.a.array.isRequired}).isRequired,currentUrl:l.a.string.isRequired,breadcrumb:l.a.string,canonicalUrl:l.a.string,currentLocale:l.a.string,autoFollowEvent:l.a.object,relatedDocuments:l.a.array.isRequired,trackDocumentView:l.a.func.isRequired,trackGenericEvent:l.a.func.isRequired,documentMetaInfo:l.a.shape({localizedCategoryName:l.a.string.isRequired,allowedLanguageCategoryName:l.a.string.isRequired}),relatedStudylists:l.a.array.isRequired,testExitPopup:l.a.string,fallbackLanguages:l.a.object,selectableLanguages:l.a.array,trackDocumentRead:l.a.func.isRequired,trackReportDocumentClick:l.a.func.isRequired,setExitPopupAsShown:l.a.func.isRequired,trackShowMoreClicked:l.a.func.isRequired,trackExitModalRelatedDocumentClicked:l.a.func.isRequired,exitPopUpShown:l.a.bool.isRequired,onToggleSidebar:l.a.func.isRequired,onHideShareModal:l.a.func.isRequired,showShareModal:l.a.bool.isRequired,showSidebar:l.a.bool.isRequired};class ls extends r.Component{static initialActions({dispatch:e},t){let s=[];return t.user.metaInfo.activePaymentPlan&&(s=[t.user.metaInfo.activePaymentPlan]),Promise.all([e(Object(y.a)(t.document)),e(Object(v.a)(t.course)),e(Object(S.a)(t.events)),e(D(t.relatedDocuments)),e(I(t.user.metaInfo.seenDocumentsCount)),e(j(Object(m.parse)(t.search.queryParams))),e(E(t.comments)),e(P(t.userInTrial)),e(Object(L.a)(t.facebook)),e(Object(M.a)(s,0)),e(Object(z.a)(t.user.studylists)),e(Object($.a)(t.showDefaultStudylist)),e(Object(B.a)({exams:{dates:t.examDatesConfig}})),e(X(t.document)),e(Object(ee.a)(t.relatedStudylists)),e(te(t.documentPreviewText)),e(Object(se.a)(pe.d)),e(ne(Boolean(t.hasExitPopUpAlreadyBeenShown))),e(Object(oe.a)(!0)),e(Object(le.a)(!1)),e(Object(ce.a)(!t.meta.isMobile))])}constructor(e){super(e),a()(this,"state",{reportModalOpen:!1,viewerWidth:0,viewerHeight:0,navigationStart:Date.now(),showExitPopup:!1}),a()(this,"handleShowExitPopup",()=>{var e;null===(e=document.body)||void 0===e||e.removeEventListener("mouseleave",this.handleShowExitPopup),this.setState({showExitPopup:!0},()=>{const e=Math.round((Date.now()-this.state.navigationStart)/1e3);this.props.setExitPopupAsShown(e)})}),a()(this,"handleHideExitPopup",()=>this.setState({showExitPopup:!1})),a()(this,"handleShowMoreClick",e=>{const t=Object(f.a)(e),s=b.a.search(this.props.document.title,{},{normalize:!0});this.props.trackShowMoreClicked(s,t)}),a()(this,"handleExitModalDocumentClicked",(e,t,s)=>{this.props.trackExitModalRelatedDocumentClicked(t,s,e.href,e.openInNewTab)}),a()(this,"handleResizeElements",()=>{const e=this.viewer.current.viewerWrapper.current,t=window.innerHeight-e.getBoundingClientRect().top;this.documentViewer.current.getElementsByClassName("document-viewer-sidebar")[0].style.height=`${t}px`;const s=window.innerWidth-e.getBoundingClientRect().left;this.setState({viewerWidth:s,viewerHeight:t})}),a()(this,"handleGestureStart",e=>{e.preventDefault()}),a()(this,"handleDocumentReadFocusLap",e=>this.props.trackDocumentRead(this.props.document,e)),a()(this,"handleHideOverlay",()=>this.setState({reportModalOpen:!1})),a()(this,"handleShowReportDocumentModal",(e=!1)=>{e||this.props.trackReportDocumentClick(),this.setState({reportModalOpen:!0,wasRatedLow:e})}),a()(this,"handleHideShareModal",()=>this.props.onHideShareModal()),this.viewer=i.a.createRef(),this.documentViewer=i.a.createRef()}componentDidMount(){var e;(this.props.trackDocumentView(this.props.document),this.props.trackGenericEvent(this.props.autoFollowEvent),this.handleResizeElements(),window.addEventListener("resize",this.handleResizeElements),document.addEventListener("gesturestart",this.handleGestureStart),"With"!==this.props.testExitPopup||this.props.exitPopUpShown)||(null===(e=document.body)||void 0===e||e.addEventListener("mouseleave",this.handleShowExitPopup))}componentDidUpdate(e){if(e.showSidebar!==this.props.showSidebar){const e=this.viewer.current.viewerWrapper.current,t=window.innerWidth-e.getBoundingClientRect().left;this.setState({viewerWidth:t})}}componentWillUnmount(){var e;(window.removeEventListener("resize",this.handleResizeElements),document.removeEventListener("gesturestart",this.handleGestureStart),"With"===this.props.testExitPopup)&&(null===(e=document.body)||void 0===e||e.removeEventListener("mouseleave",this.handleShowExitPopup))}render(){const e=`${this.props.document.assets.url+this.props.document.active_file.object_key}.html${this.props.document.assets.querystring}`,t=[];for(let e=1;e<=this.props.document.pages;e+=1)t.push(`${this.props.document.assets.url+this.props.document.active_file.object_key+e}.page${this.props.document.assets.querystring}`);return(i.a.createElement(r.Fragment,null,i.a.createElement(ge.a,null,i.a.createElement("style",{dangerouslySetInnerHTML:{__html:"\n                            body {\n                                margin:0;\n                                overflow: hidden;\n                                background-color: #fff;\n                            }\n                            #wrapper-content{\n                                margin-bottom: 0;\n                            }\n                        "}}),i.a.createElement($t,{document:this.props.document,breadcrumb:this.props.breadcrumb,meta:this.props.meta}),i.a.createElement("link",{rel:"stylesheet",crossOrigin:"anonymous",type:"text/css",href:`${this.props.document.assets.url+this.props.document.active_file.object_key}.css${this.props.document.assets.querystring}`}),i.a.createElement(Ht,{selectableLanguages:this.props.selectableLanguages||[],uniLanguage:this.props.document.course.institution.language.geocode,document:this.props.document,currentLocale:this.props.currentLocale,appDomains:this.props.config&&this.props.config.app.domains||{},fullUrl:this.props.currentUrl,canonicalUrl:this.props.canonicalUrl,localizedCategoryName:this.props.documentMetaInfo&&this.props.documentMetaInfo.localizedCategoryName,allowedLanguageCategoryName:this.props.documentMetaInfo&&this.props.documentMetaInfo.allowedLanguageCategoryName,fallbackLanguages:this.props.fallbackLanguages})),i.a.createElement("div",{className:"document-viewer",ref:this.documentViewer},i.a.createElement("div",{className:h()("sidebar-wrapper",{"sidebar-open":this.props.showSidebar})},i.a.createElement("div",{className:"top-bar-wrapper"},i.a.createElement(is,{isSidebarOpen:this.props.showSidebar,onClick:()=>this.props.onToggleSidebar("Top Bar")})),i.a.createElement(zt,{open:this.props.showSidebar,document:this.props.document,user:this.props.user,onSidebarToggle:this.props.onToggleSidebar,configBookCategories:this.props.docConfig.bookCategories,currentUrl:this.props.currentUrl,course:this.props.course,config:this.props.docConfig,language:this.props.language,relatedDocuments:this.props.relatedDocuments,dataTestSelector:"document-viewer-sidebar",onShowReportDocumentModal:this.handleShowReportDocumentModal,relatedStudylists:this.props.relatedStudylists})),i.a.createElement(he.a,{pages:t,ref:this.viewer,document:this.props.document,documentStructureUrl:e,width:this.state.viewerWidth,height:this.state.viewerHeight,sidebarOpen:this.props.showSidebar}),i.a.createElement(He,{lapTime:[60],onTimerReachLap:this.handleDocumentReadFocusLap})),i.a.createElement(de.a,{isFullPage:!0,show:this.state.reportModalOpen,onClick:this.handleHideOverlay}),i.a.createElement(Be,{show:this.state.reportModalOpen,onHide:this.handleHideOverlay,title:this.state.wasRatedLow?p.a.get("negative_rate_report"):p.a.get("report_document")}),i.a.createElement(Qt,{show:this.state.showExitPopup,cdn:this.props.cdn,onHide:this.handleHideExitPopup,user:this.props.user,documents:this.props.relatedDocuments,onShowMoreClick:this.handleShowMoreClick,formatLanguage:this.props.formatLanguage,onDocumentClicked:this.handleExitModalDocumentClicked,testRatingsTimeRange:this.props.testRatingsTimeRange}),i.a.createElement(ts,{show:this.props.showShareModal,onHide:this.handleHideShareModal})))}}ls.propTypes=os,ls.defaultProps={config:null,breadcrumb:null,canonicalUrl:null,testExitPopup:null,currentLocale:null,autoFollowEvent:null,documentMetaInfo:null,fallbackLanguages:null,selectableLanguages:[]};t.default=Object(me.a)(Object(c.connect)(e=>{let t;return e.segment.events&&(t=e.segment.events["Follow Course"]),{document:e.document.current,user:e.user,docConfig:e.meta.config,course:e.course.current,currentUrl:e.meta.currentUrl,language:e.meta.currentLanguage,autoFollowEvent:t,relatedDocuments:e.document.elasticDocuments||[],relatedStudylists:e.studylist.list,meta:e.meta,testAppPromotionInPremiumBanner:e.ab.testAppPromotionInPremiumBanner,testExitPopup:e.ab.testExitPopup,exitPopUpShown:e.document.exitPopUpShown,cdn:e.meta.cdn,formatLanguage:e.meta.formatLanguage,testRatingsTimeRange:e.ab.testRatingsTimeRange,showShareModal:Object(R.b)(e),showSidebar:Object(R.c)(e),isMobile:e.meta.isMobile,isMobileToolbarEnhanced:Object(_.d)(e)}},e=>({trackDocumentView:t=>e(Object(w.a)(t)),trackGenericEvent:t=>e(Object(x.a)(t)),trackReportDocumentClick:()=>e(Z),trackDocumentRead:(t,s)=>e(T(t.id,t.pages,s)),trackShowMoreClicked:(t,s)=>e(Object(re.a)("Show More Clicked",{Origin:"Viewer Exit Popup"},{href:t,isNewTab:s})),trackExitModalRelatedDocumentClicked:(t,s,n,a)=>e(ie(t,s,{href:n,isNewTab:a},"Viewer Exit Popup")),setExitPopupAsShown:t=>e(ae(t)),onToggleSidebar:t=>e(Object(ue.a)(t)),onHideShareModal:()=>e(Object(le.a)(!1))}))(ls))}},[["sdAw",1,2,0,3,4,5,6,7,9,8,11,10,12,13,17,15,14,16,20,19,24,23,22,26,25,27,29,30,32,39,37,34,38,35,33,40,36,46,44,45,43,48,54,56,55,50,57,53,66,60,64,59,74,77,73,71,96,93,95,98,92,97,82,91,94,119,121,122,120]]]);